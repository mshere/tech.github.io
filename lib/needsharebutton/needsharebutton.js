!function(){function e(e,t){if("string"==typeof t){var o=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;if(o)for(;e;){if(o.bind(e)(t))return e;e=e.parentElement}return!1}for(;e;){if(e==t)return e;e=e.parentElement}return!1}window.needShareButton=function(t,o){var n=this;for(var r in n.elem=t||"need-share-button",n.getTitle=function(){var e;return document.querySelector&&(e=document.querySelector("title"))?e.innerText:document.title},n.getImage=function(){var e;return document.querySelector&&(e=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))?e.getAttribute("content"):""},n.getDescription=function(){var e;return document.querySelector?(e=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?e.getAttribute("content"):"":(e=document.getElementsByTagName("meta").namedItem("description"))?e.getAttribute("content"):""},n.share={weibo:function(e){var t=i(e),o="http://v.t.sina.com.cn/share/share.php?title="+encodeURIComponent(t.title)+"&url="+encodeURIComponent(t.url)+"&pic="+encodeURIComponent(t.image);n.popup(o)},wechat:function(e){var t=i(e),o="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+encodeURIComponent(t.url),n=e.querySelector(".need-share-button_dropdown"),r=n.getElementsByClassName("need-share-wechat-code-image")[0];r?r.remove():((r=document.createElement("img")).src=o,r.alt="loading wechat image...",r.setAttribute("class","need-share-wechat-code-image"),n.appendChild(r))},douban:function(e){var t=i(e),o="https://www.douban.com/share/service?name="+encodeURIComponent(t.title)+"&href="+encodeURIComponent(t.url)+"&image="+encodeURIComponent(t.image);n.popup(o)},qqzone:function(e){var t=i(e),o="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(t.title)+"&url="+encodeURIComponent(t.url)+"&pics="+encodeURIComponent(t.image)+"&desc="+encodeURIComponent(t.description);n.popup(o)},renren:function(e){var t=i(e),o="http://widget.renren.com/dialog/share?title="+encodeURIComponent(t.title)+"&resourceUrl="+encodeURIComponent(t.url)+"&pic="+encodeURIComponent(t.image)+"&description="+encodeURIComponent(t.description);n.popup(o)},mailto:function(e){var t=i(e),o="mailto:?subject="+encodeURIComponent(t.title)+"&body=Thought you might enjoy reading this: "+encodeURIComponent(t.url)+" - "+encodeURIComponent(t.description);window.location.href=o},twitter:function(e){var t=i(e),o=t.protocol+"twitter.com/intent/tweet?text=";o+=encodeURIComponent(t.title)+"&url="+encodeURIComponent(t.url),n.popup(o)},pinterest:function(e){var t=i(e),o=t.protocol+"pinterest.com/pin/create/bookmarklet/?is_video=false";o+="&media="+encodeURIComponent(t.image),o+="&url="+encodeURIComponent(t.url),o+="&description="+encodeURIComponent(t.title),n.popup(o)},facebook:function(e){var t=i(e),o=t.protocol+"www.facebook.com/share.php?";o+="u="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),n.popup(o)},googleplus:function(e){var t=i(e),o=t.protocol+"plus.google.com/share?";o+="url="+encodeURIComponent(t.url),n.popup(o)},reddit:function(e){var t=i(e),o=t.protocol+"www.reddit.com/submit?";o+="url="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),n.popup(o)},delicious:function(e){var t=i(e),o=t.protocol+"del.icio.us/post?";o+="url="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),o+="&notes="+encodeURIComponent(t.description),n.popup(o)},stumbleupon:function(e){var t=i(e),o=t.protocol+"www.stumbleupon.com/submit?";o+="url="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),n.popup(o)},linkedin:function(e){var t=i(e),o=t.protocol+"www.linkedin.com/shareArticle?mini=true";o+="&url="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),o+="&source="+encodeURIComponent(t.source),n.popup(o)},posterous:function(e){var t=i(e),o=t.protocol+"posterous.com/share?";o+="linkto="+encodeURIComponent(t.url),n.popup(o)},tumblr:function(e){var t=i(e),o=t.protocol+"www.tumblr.com/share?v=3";o+="&u="+encodeURIComponent(t.url),o+="&t="+encodeURIComponent(t.title),n.popup(o)},evernote:function(e){var t=i(e),o=t.protocol+"www.evernote.com/clip.action?";o+="url="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),n.popup(o)},friendfeed:function(e){var t=i(e),o=t.protocol+"www.friendfeed.com/share?";o+="url="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),n.popup(o)},vkontakte:function(e){var t=i(e),o=t.protocol+"vkontakte.ru/share.php?";o+="url="+encodeURIComponent(t.url),o+="&title="+encodeURIComponent(t.title),o+="&description="+encodeURIComponent(t.description),o+="&image="+encodeURIComponent(t.image),o+="&noparse=true",n.popup(o)},odnoklassniki:function(e){var t=i(e),o=t.protocol+"www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1";o+="&st.comments="+encodeURIComponent(t.description),o+="&st._surl="+encodeURIComponent(t.url),n.popup(o)}},n.popup=function(e){var t=void 0!=window.screenLeft?window.screenLeft:screen.left,o=void 0!=window.screenTop?window.screenTop:screen.top,n=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-300+t,r=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-250+o,i=window.open(e,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600, height=500, top="+r+", left="+n);window.focus&&i.focus()},n.options={iconStyle:"default",boxForm:"horizontal",position:"bottomCenter",protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Pinterest,Facebook,GooglePlus,Reddit,Linkedin,Tumblr,Mailto"},o)n.options[r]=o[r];function i(e){var t={};for(var o in n.options)t[o]=n.options[o];for(var r in t.url=window.location.href,t.title=n.getTitle(),t.image=n.getImage(),t.description=n.getDescription(),e.dataset)if(r.match(/share/)){var i=r.replace(/share/,"");if(!i.length)continue;i=i.charAt(0).toLowerCase()+i.slice(1);var c=e.dataset[r];"networks"===i?c=c.toLowerCase().split(","):"url"===i&&c&&"/"===c[0]&&(c=location.origin+c),t[i]=c}return t}n.options.networks=n.options.networks.toLowerCase().split(","),document.addEventListener("click",function(t){var o=document.querySelector(".need-share-button-opened");if(!e(t.target,".need-share-button-opened"))if(o)o.classList.remove("need-share-button-opened"),o.querySelector(".need-share-wechat-code-image")&&o.querySelector(".need-share-wechat-code-image").remove();else{var r=e(t.target,n.elem);r&&(r.classList.contains("need-share-button-opened")||(!function(t){var o=document.createElement("span");if(o.className="need-share-button_dropdown",!t.querySelector(".need-share-button_dropdown")){var r=i(t);"box"==r.iconStyle&&"horizontal"==r.boxForm?o.className+=" need-share-button_dropdown-box-horizontal":"box"==r.iconStyle&&"vertical"==r.boxForm&&(o.className+=" need-share-button_dropdown-box-vertical"),setTimeout(function(){switch(r.position){case"topLeft":o.className+=" need-share-button_dropdown-top-left";break;case"topRight":o.className+=" need-share-button_dropdown-top-right";break;case"topCenter":o.className+=" need-share-button_dropdown-top-center",o.style.marginLeft=-o.offsetWidth/2+"px";break;case"middleLeft":o.className+=" need-share-button_dropdown-middle-left",o.style.marginTop=-o.offsetHeight/2+"px";break;case"middleRight":o.className+=" need-share-button_dropdown-middle-right",o.style.marginTop=-o.offsetHeight/2+"px";break;case"bottomLeft":o.className+=" need-share-button_dropdown-bottom-left";break;case"bottomRight":o.className+=" need-share-button_dropdown-bottom-right";break;case"bottomCenter":default:o.className+=" need-share-button_dropdown-bottom-center",o.style.marginLeft=-o.offsetWidth/2+"px"}},1);var c="default"==r.iconStyle?"need-share-button_link need-share-button_":"need-share-button_link-"+r.iconStyle+" need-share-button_link need-share-button_";for(var a in r.networks){var d=document.createElement("span");a=r.networks[a],d.className=c+a,d.className+=" icon-"+a,d.dataset.network=a,d.title=a,o.appendChild(d)}o.addEventListener("click",function(o){if(e(o.target,".need-share-button_link"))return o.preventDefault(),o.stopPropagation(),n.share[o.target.dataset.network](t),!1}),t.appendChild(o)}}(r),setTimeout(function(){r.classList.add("need-share-button-opened")},1)))}})},new needShareButton(".need-share-button")}();